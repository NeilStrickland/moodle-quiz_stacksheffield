{"version":3,"sources":["../src/timeline_viewer.js"],"names":["define","attempt","id","steps","num_steps","last_step","step","t","fraction","pad","time_string","t0","d","Math","floor","h","m","s","add_attempt","a0","a","Object","create","i","length","s0","quiz_attempt_id","slot","sequence_number","url","push","attempts","full_seconds","hours","minutes","seconds","duration_string","msg","create_attempt_dom","me","x0","w","x","y","bar","document","createElementNS","setAttributeNS","stroke_colour","stroke_width","onmouseover","show_msg","onmouseout","svg","appendChild","create_step_dom","marker","marker_radius","inactive_colour","correct_colour","active_colour","active_correct_colour","incorrect_colour","active_incorrect_colour","iffy_colour","active_iffy_colour","onclick","window","open","create_line","hh","l","minute_lines","init","div","getElementById","msg_div","zoom_ip","w0","t_max","data","JSON","parse","dataset","timelines","n","aa","ww","width","height","style","viewBox","onchange","set_zoom","innerHTML","z","parseFloat","value","c","exp","j","k"],"mappings":"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","sourcesContent":["define([],function() {\n    var timeline_viewer = {};\n\n    timeline_viewer.attempt = { id : 0, steps : null, num_steps : 0, last_step : null };\n    timeline_viewer.step = { t : 0, id : 0, fraction : 0 };\n\n    timeline_viewer.pad = function(t) {\n        return ((t < 10) ? '0' : '') + t;\n    };\n\n    timeline_viewer.time_string = function(t) {\n        var t0 = t;\n        var d = Math.floor(t0 / (24 * 60 * 60));\n        t0 -= d * 24 * 3600;\n        var h = Math.floor(t0 / (60 * 60));\n        t0 -= h * 60 * 60;\n        var m = Math.floor(t0 / 60);\n        t0 -= m * 60;\n        var s = t0;\n        if (d) {\n            return '' + d + ':' + this.pad(h) + ':' + this.pad(m) + ':' + this.pad(s) + 's';\n        } else if (h) {\n            return '' + h + ':' + this.pad(m) + ':' + this.pad(s) + 's';\n        } else if (m) {\n            return '' + m + ':' + this.pad(s) + 's';\n        } else {\n            return '' + s + 's';\n        }\n    };\n\n    timeline_viewer.add_attempt = function(a0) {\n        var a = Object.create(this.attempt);\n        a.steps = [];\n        for (var i = 1; i <= a0.length; i++) {\n            var s0 = a0[i-1];\n            var s = Object.create(this.step);\n            s.i = i;\n            s.t = s0[0];\n            s.quiz_attempt_id = s0[1];\n            s.slot = s0[2];\n            s.sequence_number = s0[3];\n            s.fraction = s0[4];\n            s.url =\n                '/moodle/mod/quiz/reviewquestion.php' +\n                '?attempt=' + s.quiz_attempt_id +\n                '&slot=' + s.slot +\n                '&step=' + s.sequence_number;\n            a.steps.push(s);\n        }\n\n        a.num_steps = a.steps.length;\n        a.last_step = a.steps[a.steps.length - 1];\n        a.i = this.attempts.length;\n\n        a.full_seconds = a.last_step.t;\n        a.hours = Math.floor(a.full_seconds / 3600);\n        a.minutes = Math.floor((a.full_seconds - 3600 * a.hours)/60);\n        a.seconds = a.full_seconds - 3600 * a.hours - 60 * a.minutes;\n        if (a.hours) {\n            a.duration_string =\n                a.hours +\n                ':' + (a.minutes < 10 ? '0' : '') + a.minutes  +\n                ':' + (a.seconds < 10 ? '0' : '') + a.seconds;\n        } else if (a.minutes) {\n            a.duration_string =\n                a.minutes  +\n                ':' + (a.seconds < 10 ? '0' : '') + a.seconds;\n        } else {\n            a.duration_string = '' + a.seconds;\n        }\n\n        if (a.num_steps == 1) {\n            a.msg = 'One attempt; total duration ' + this.time_string(a.last_step.t) + '.';\n        } else {\n            a.msg = '' + a.num_steps + ' attempts; total duration ' + this.time_string(a.last_step.t) + '.';\n        }\n\n        for (var i = 1; i <= a.num_steps; i++) {\n            var s = a.steps[i-1];\n            s.msg = 'Attempt ' + i + '/' + a.num_steps + '; ' +\n                this.time_string(s.t) + ' after first view';\n            if (i > 1) {\n                s.msg += '; ' +\n                    this.time_string(s.t - a.steps[0].t) +\n                    ' after first attempt';\n            }\n            if (i > 2) {\n                s.msg += '; ' +\n                    this.time_string(s.t - a.steps[i-2].t) +\n                    ' after previous attempt';\n            }\n            s.msg += '.';\n        }\n\n        this.attempts.push(a);\n\n        return a;\n    };\n\n    timeline_viewer.create_attempt_dom = function(a) {\n        var me = this;\n\n        a.x0 = a.last_step.t * this.w;\n        a.x = a.x0;\n        a.y = 2 * (a.i + 2) * this.h;\n        a.bar = document.createElementNS('http://www.w3.org/2000/svg','line');\n        a.bar.setAttributeNS(null,'x1',0);\n        a.bar.setAttributeNS(null,'y1',a.y);\n        a.bar.setAttributeNS(null,'x2',a.x);\n        a.bar.setAttributeNS(null,'y2',a.y);\n        a.bar.setAttributeNS(null,'stroke',this.stroke_colour);\n        a.bar.setAttributeNS(null,'stroke-width',this.stroke_width);\n        a.bar.onmouseover = function() {\n            me.show_msg(a.msg);\n            a.bar.setAttributeNS(null,'stroke','#000000');\n        };\n\n        a.bar.onmouseout  = function() {\n            me.show_msg('');\n            a.bar.setAttributeNS(null,'stroke',me.stroke_colour);\n        };\n\n        this.svg.appendChild(a.bar);\n\n        for (var i in a.steps) {\n            var s = a.steps[i];\n            this.create_step_dom(a,s);\n        }\n    };\n\n    timeline_viewer.create_step_dom = function(a,s) {\n        var me = this;\n\n        s.x0 = s.t * this.w;\n        s.x = s.x0;\n\n        s.marker = document.createElementNS('http://www.w3.org/2000/svg','circle');\n        s.marker.setAttributeNS(null,'cx',s.x);\n        s.marker.setAttributeNS(null,'cy',a.y);\n        s.marker.setAttributeNS(null,'r',this.marker_radius);\n        if (s.fraction == 1) {\n            s.inactive_colour = this.correct_colour;\n            s.active_colour = this.active_correct_colour;\n        } else if (s.fraction == 0) {\n            s.inactive_colour = this.incorrect_colour;\n            s.active_colour = this.active_incorrect_colour;\n        } else {\n            s.inactive_colour = this.iffy_colour;\n            s.active_colour = this.active_iffy_colour;\n        }\n        s.marker.setAttributeNS(null,'stroke',s.inactive_colour);\n        s.marker.setAttributeNS(null,'fill',s.inactive_colour);\n\n        s.marker.onmouseover = function() {\n            me.show_msg(s.msg);\n            s.marker.setAttributeNS(null,'stroke',s.active_colour);\n            s.marker.setAttributeNS(null,'fill',s.active_colour);\n        };\n\n        s.marker.onmouseout  = function() {\n            me.show_msg('');\n            s.marker.setAttributeNS(null,'stroke',s.inactive_colour);\n            s.marker.setAttributeNS(null,'fill',s.inactive_colour);\n        };\n\n        s.marker.onclick = function() { window.open(s.url); };\n\n        this.svg.appendChild(s.marker);\n    };\n\n    timeline_viewer.create_line = function(i,hh) {\n        var me = this;\n        var l = document.createElementNS('http://www.w3.org/2000/svg','line');\n        l.setAttributeNS(null,'x1',this.w * i);\n        l.setAttributeNS(null,'y1',0);\n        l.setAttributeNS(null,'x2',this.w * i);\n        l.setAttributeNS(null,'y2',hh);\n        if (i % 600 == 0) {\n            l.setAttributeNS(null,'stroke','#0000DD');\n            l.setAttributeNS(null,'stroke-width',3);\n        } else {\n            l.setAttributeNS(null,'stroke','#0000DD');\n            l.setAttributeNS(null,'stroke-width',1);\n            l.setAttributeNS(null,'stroke-dasharray','2,2');\n        }\n\n        l.onmouseover = function() {\n            me.show_msg(me.time_string(i));\n        };\n\n        l.onmouseout = function() {\n            me.show_msg('');\n        };\n\n        this.minute_lines[i] = l;\n        this.svg.appendChild(l);\n    };\n\n    timeline_viewer.init = function() {\n        var me = this;\n\n        this.div     = document.getElementById('timelines_div');\n        this.svg     = document.getElementById('timelines_svg');\n        this.msg_div = document.getElementById('timelines_msg');\n        this.zoom_ip = document.getElementById('timelines_zoom');\n\n        this.h = 3;\n        this.w0 = 1;\n        this.w = this.w0;\n        this.t_max = 800;\n        this.marker_radius = 3;\n        this.stroke_width = 3;\n        this.stroke_colour           = '#888888';\n        this.correct_colour          = '#00DD00';\n        this.iffy_colour             = '#FFA500';\n        this.incorrect_colour        = '#DD0000';\n        this.active_correct_colour   = '#006600';\n        this.active_iffy_colour      = '#886600';\n        this.active_incorrect_colour = '#660000';\n        this.data = JSON.parse(this.div.dataset.timelines);\n        this.n = this.data.length;\n\n        this.attempts = [];\n\n        for (var i in this.data) {\n            var a = this.add_attempt(this.data[i]);\n            this.create_attempt_dom(a);\n        }\n\n        var aa = this.attempts[this.attempts.length - 1];\n        var ww = aa.x + 10;\n        var hh = aa.y + 10;\n        this.svg.width = ww;\n        this.svg.height = hh;\n        this.svg.style.width = ww + 'px';\n        this.svg.style.height = hh + 'px';\n        this.svg.viewBox = '0 0 ' + ww + ' ' + hh;\n\n        this.minute_lines = {};\n\n        for (var i = 60; i <= aa.last_step.t; i += 60) {\n            this.create_line(i,hh);\n        }\n\n        this.zoom_ip.onchange = function() {\n            me.set_zoom();\n        };\n    };\n\n    timeline_viewer.show_msg = function(s) {\n        this.msg_div.innerHTML = s;\n    };\n\n    timeline_viewer.set_zoom = function() {\n        var z = parseFloat(this.zoom_ip.value);\n        var c = Math.exp(-0.05 * z);\n        this.w = this.w0 * c;\n        for (var i in this.attempts) {\n            var a = this.attempts[i];\n            a.x = a.x0 * c;\n            a.bar.setAttributeNS(null,'x2',a.x);\n            for (var j in a.steps) {\n                var s = a.steps[j];\n                s.x = s.x0 * c;\n                s.marker.setAttributeNS(null,'cx',s.x);\n            }\n        }\n\n        for (var k in this.minute_lines) {\n            var l = this.minute_lines[k];\n            l.setAttributeNS(null,'x1',this.w * k);\n            l.setAttributeNS(null,'x2',this.w * k);\n        }\n    };\n\n    return timeline_viewer;\n});\n"],"file":"timeline_viewer.min.js"}